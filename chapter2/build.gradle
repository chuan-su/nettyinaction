def port = '4000'
def host = 'localhost'

project(':chapter2:server') {
    mainClassName = 'nia.chapter2.EchoServer'
    run {
        if (project.hasProperty("appArgs")) {
            args Eval.me(appArgs) // Then to run: gradle run -PappArgs="['arg1', 'args2']"
        } else {
            args port  // or args "${port}"
        }
    }
}

project(':chapter2:client') {
    mainClassName = 'nia.chapter2.EchoClient'
    run {
        if (project.hasProperty("appArgs")) {
            args Eval.me(appArgs)
        } else {
            args Eval.me("['${host}', ${port}]")
        }
    }
}